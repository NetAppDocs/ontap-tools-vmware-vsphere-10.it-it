---
permalink: deploy/deployment-error-codes.html 
sidebar: sidebar 
keywords: upgrade 
summary: In questa pagina vengono descritti i codici di errore per le operazioni di distribuzione, riavvio e ripristino degli strumenti ONTAP per il sistema VMware vSphere. 
---
= Risolvi gli errori di distribuzione degli ONTAP tools
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Se riscontri problemi durante la distribuzione, esamina i registri e i codici di errore per diagnosticare e risolvere i problemi.  A partire dagli ONTAP tools for VMware vSphere 10.5, i bundle di log raccolti dai pod includono i log di MongoDB, RabbitMQ e Vault, insieme allo stato e alle descrizioni di tutti i pod.  Questi vengono forniti in aggiunta ai registri di servizio degli strumenti ONTAP esistenti, migliorando il supporto e la risoluzione dei problemi.



== Raccogliere i file di log

È possibile raccogliere i file di log per i tool ONTAP per VMware vSphere dalle opzioni disponibili nell'interfaccia utente di ONTAP tools Manager. Il supporto tecnico potrebbe richiedere di raccogliere i file di registro per risolvere un problema.


NOTE: La generazione di log da ONTAP Tools Manager include tutti i log per tutte le istanze di vCenter Server. La generazione di log dall'interfaccia utente del client vCenter è prevista per vCenter Server selezionato.

.Fasi
. Avviare Gestione strumenti ONTAP da un browser Web: `\https://<ONTAPtoolsIP>:8443/virtualization/ui/`
. Effettua l'accesso con i tool ONTAP per le credenziali di amministratore di VMware vSphere fornite durante l'implementazione.
. Selezionare *Log Bundle* dalla barra laterale.
+
Questa operazione può richiedere alcuni minuti.

. Selezionare *generate* per generare i file di registro.
. Immettere l'etichetta per il pacchetto di log e selezionare *genera*.
+
Scaricare il file tar.gz e inviarlo all'assistenza tecnica.



Per generare il bundle di log utilizzando l'interfaccia utente del client vCenter, procedere come segue:

.Fasi
. Accedere al client vSphere.
. Dalla home page di vSphere Client, andare a *supporto* > *pacchetto di registrazione* > *genera*.
. Specifica l'etichetta del bundle di log e generalo. L'opzione di download verrà visualizzata durante la generazione dei file. Il download potrebbe richiedere del tempo.



NOTE: Il bundle di log generato sostituisce il bundle di log generato negli ultimi 3 giorni o 72 ore.



== Codici di errore di distribuzione

Potrebbero verificarsi codici di errore durante gli strumenti ONTAP per le operazioni di distribuzione, riavvio e ripristino di VMware vSphere.
I codici di errore sono composti da cinque cifre, in cui le prime due rappresentano lo script che ha riscontrato il problema e le ultime tre cifre rappresentano il flusso di lavoro specifico all'interno dello script.

Tutti i log degli errori vengono registrati nel file ansible-perl-errors.log nella directory /var/log per facilitare il monitoraggio e la risoluzione dei problemi.  Questo file di registro contiene il codice di errore e l'attività Ansible non riuscita.


NOTE: I codici di errore forniti in questa pagina sono solo a scopo di riferimento. Se l'errore persiste o se non è stata menzionata alcuna soluzione, contattare il team di supporto.

Nella tabella seguente sono elencati i codici di errore e i nomi dei file corrispondenti.

|===


| *Codice errore* | *Nome script* 


| 00 | firstboot-network-config.pl, distribuzione in modalità 


| 01 | firstboot-network-config.pl, aggiornamento della modalità 


| 02 | firstboot-inputs-validation.pl 


| 03 | firstboot-deploy-otv-ng.pl, implementazione, ha 


| 04 | firstboot-deploy-otv-ng.pl, implementazione, non ha 


| 05 | firstboot-deploy-otv-ng.pl, riavviare 


| 06 | firstboot-deploy-otv-ng.pl, upgrade, ha 


| 07 | firstboot-deploy-otv-ng.pl, upgrade, non ha 


| 08 | firstboot-otv-recovery.pl 


| 09 | post-deploy-upgrade.pl 
|===
Le ultime tre cifre del codice di errore indicano l'errore specifico del flusso di lavoro nello script:

|===


| *Codice errore di distribuzione* | *Flusso di lavoro* | *Risoluzione* 


| 049 | Per la rete e la convalida, lo script perl li assegnerà a breve | - 


| 050 | Generazione chiave SSH non riuscita | Riavviare la macchina virtuale primaria (VM). 


| 053 | Installazione RKE2 non riuscita | Eseguire quanto segue e riavviare la macchina virtuale primaria o ridistribuire:
Sudo rke2-killall.sh (tutte le VM)
Sudo rke2-uninstall.sh (tutte le VM). 


| 054 | Impostazione kubeconfig non riuscita | Ridistribuzione 


| 055 | Distribuzione del registro non riuscita | Se il pod del Registro di sistema è presente, attendere che il pod sia pronto, quindi riavviare la macchina virtuale primaria oppure ridistribuirla. 


| 059 | La distribuzione di KubeVip non è riuscita | Assicurati che l'indirizzo IP virtuale per il piano di controllo di Kubernetes e l'indirizzo IP degli strumenti ONTAP forniti durante l'implementazione appartengano alla stessa VLAN e siano indirizzi IP gratuiti. Riavviare se tutti i punti precedenti sono corretti. Altrimenti, ridistribuzione. 


| 060 | L'implementazione dell'operatore non è riuscita | Riavviare 


| 061 | Distribuzione dei servizi non riuscita | Esegui il debug di base di Kubernetes come Get pods, Get rs, Get svc e così via nello spazio dei nomi del sistema ntv per maggiori dettagli e log degli errori su /var/log/ansible-perl-errors.log e /var/log/ansible-run.log e ridistribuisci. 


| 062 | La distribuzione dei servizi strumenti ONTAP non è riuscita | Fare riferimento ai log degli errori in /var/log/ansible-perl-errors.log per ulteriori dettagli e ridistribuire. 


| 065 | L'URL della pagina Swagger non è raggiungibile | Ridistribuzione 


| 066 | I passaggi di post-implementazione per il certificato del gateway non sono riusciti | Effettuare le seguenti operazioni per recuperare/completare l'aggiornamento: * Attiva shell diagnostica. * Eseguire il comando 'sudo perl /home/maint/scripts/post-deploy-upgrade.pl --postDeploy'. * Controllare i log in /var/log/post-deploy-upgrade.log. 


| 088 | La configurazione della rotazione del registro per il giornale non è riuscita | Verificare le impostazioni di rete della VM compatibili con l'host su cui è ospitata la VM. È possibile provare a eseguire la migrazione a un altro host e riavviare la macchina virtuale. 


| 089 | La modifica della proprietà del file di configurazione rotazione del registro di riepilogo non è riuscita | Riavviare la macchina virtuale principale. 


| 096 | Installa il provisioner di storage dinamico | - 


| 108 | Seeding script non riuscito | - 
|===
|===


| *Riavviare il codice di errore* | *Flusso di lavoro* | *Risoluzione* 


| 067 | Attesa per rke2-server scaduta. | - 


| 101 | Impossibile reimpostare la password utente Maint/Console. | - 


| 102 | Impossibile eliminare il file della password durante la reimpostazione della password utente Maint/Console. | - 


| 103 | Impossibile aggiornare la nuova password utente Maint/Console nel vault. | - 


| 088 | La configurazione della rotazione del registro per il giornale non è riuscita. | Verificare le impostazioni di rete della VM compatibili con l'host su cui è ospitata la VM. È possibile provare a eseguire la migrazione a un altro host e riavviare la macchina virtuale. 


| 089 | La modifica della proprietà del file di configurazione rotazione del registro di riepilogo non è riuscita. | Riavviare l'VM. 
|===